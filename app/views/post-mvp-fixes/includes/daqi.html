{% set daqiValue = airQuality.today.value %}

{% set firstRow = [] %}
{% for i in range(1, 11) %}
    {% if i <= daqiValue %}
        {% set cellClass = "daqi-table__cell daqi-selected daqi-" ~ daqiValue %}
    {% else %}
        {% set cellClass = "daqi-table__cell daqi-0" %}
    {% endif %}
    {% set cell = { classes: cellClass, text: i | string } %} 
    {% set _ = firstRow.push(cell) %}          
{% endfor %}

{{ govukTable({
classes: "govuk-!-margin-bottom-8",
caption: "The air pollution forecast for today is " ~ airQuality.today.readableBand ~ ", " ~ airQuality.today.value ~ " out of 10",
captionClasses: "govuk-heading-m daqi-table__caption govuk-!-margin-bottom-2",
  head: [
  { text: "Low", classes: "daqi-band", colspan: 3 },
  { text: "Moderate", classes: "daqi-band", colspan: 3 },
  { text: "High", classes: "daqi-band", colspan: 3 },
  { text: "Very high", classes: "daqi-band" }
  ], 
  rows: [firstRow]
}) }}



